<html>
<body>
<pre id='token'></pre>
<pre id='receipt'></pre>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://unpkg.com/rareterm@0.0.9"></script>
<script>
const mint = async () => {

  // 1. Initialize a rarepress object from Rareterm
  const rarepress = new Rareterm();
  // 2. Connect to a rinkeby rarenet node
  await rarepress.init({ host: "https://rinkeby.rarenet.app/v1" })

  for(var i = 0; i < 100; i++) {
  // 3. Import a web image to rarepress file system
//  let cid = await rarepress.fs.add("items/ref_" + i + ".png")

  // 4. Create and save a token on rarepress
    $.getJSON( "metadata/ref_" + i + ".json", function( data ) {
/*      var items = [];
      $.each( data, function( key, val ) {
  
        items.push( "<li id='" + key + "'>" + val + "</li>" );
      });
     
      $( "<ul/>", {
        "class": "my-new-list",
        html: items.join( "" )
      }).appendTo( "body" );
*/
      $.each(data[0].traits, function(key, val) {
          console.log("key:" + key + " value: " + val);

      }

    });    

/*
  let token = await rarepress.token.create({
    type: "ERC721",
    metadata: {
      name: "Hello World NFT",
      description: "Minting NFT so easy!",
      image: "/ipfs/" + cid
    }
  })

  // 5. Publish the image on public IPFS
  await rarepress.fs.push(cid)
  // 6. Publish the metadata on public IPFS
  await rarepress.fs.push(token.tokenURI)

  // 7. Publish the token to the marketplace
  let receipt = await rarepress.token.send(token)

  document.querySelector("#token").innerHTML = "token object\n\n" + JSON.stringify(token, null, 2)
  document.querySelector("#receipt").innerHTML = "token publish receipt\n\n" + JSON.stringify(receipt, null, 2) 
  */ 
  }
}
mint()
</script>
</body>
</html>